### Tipos de EJB: Session Beans, Message-Driven Beans e Entity Beans

Quando falamos sobre **Enterprise JavaBeans (EJB)**, estamos lidando com uma tecnologia robusta que ajuda a desenvolver
**aplica√ß√µes corporativas** com alta escalabilidade e performance. Mas EJB n√£o √© uma solu√ß√£o √∫nica para tudo. Ele
oferece diferentes tipos de **beans**, cada um com uma fun√ß√£o espec√≠fica e um prop√≥sito bem definido. Neste artigo,
vamos explorar os tr√™s tipos principais de EJB: **Session Beans**, **Message-Driven Beans (MDBs)** e **Entity Beans**. E
acredite, cada um tem um papel fundamental na cria√ß√£o de aplica√ß√µes eficientes e robustas.

Ent√£o, prepare-se para entender o que cada um desses caras faz e como eles podem ser usados para resolver os problemas
do mundo real.

---

### 1. **Session Beans**: O Faz-Tudo da L√≥gica de Neg√≥cios

Os **Session Beans** s√£o os componentes mais comuns no mundo do EJB. Eles s√£o a espinha dorsal de sua aplica√ß√£o,
respons√°veis por conter a l√≥gica de neg√≥cios e executar as opera√ß√µes que o cliente precisa. Quando um cliente faz uma
solicita√ß√£o, ele geralmente est√° chamando um m√©todo de um Session Bean.

Os Session Beans s√£o divididos em tr√™s tipos principais:

- **Stateless Session Beans**
- **Stateful Session Beans**
- **Singleton Session Beans**

#### 1.1 **Stateless Session Beans**

Como o nome sugere, os **Stateless Session Beans** n√£o guardam estado entre as chamadas. Isso significa que, sempre que
o cliente faz uma solicita√ß√£o, o bean trata a opera√ß√£o e, em seguida, "esquece" de qualquer informa√ß√£o ap√≥s a execu√ß√£o.
Eles s√£o ideais para opera√ß√µes onde o estado do cliente n√£o precisa ser mantido, como uma consulta ao banco de dados ou
c√°lculos matem√°ticos simples.

**Exemplo de Stateless Session Bean:**

```java
import javax.ejb.Stateless;

@Stateless
public class CalculadoraBean {

    public int soma(int a, int b) {
        return a + b;
    }
}
```

Aqui, o bean apenas realiza a soma dos n√∫meros e n√£o se preocupa em manter qualquer informa√ß√£o sobre a sess√£o do
cliente.

**Quando usar Stateless Session Beans?**

- Quando voc√™ n√£o precisa manter o estado do cliente.
- Para opera√ß√µes repetitivas e de alta performance, como servi√ßos web, APIs REST, ou c√°lculos simples.

#### 1.2 **Stateful Session Beans**

Diferentemente dos Stateless Beans, os **Stateful Session Beans** mant√™m o estado entre as chamadas. Isso significa que,
enquanto o cliente continuar usando o bean, ele pode armazenar informa√ß√µes sobre a sess√£o, como dados de carrinho de
compras, por exemplo. Eles s√£o ideais quando voc√™ precisa acompanhar as intera√ß√µes de um cliente em uma sequ√™ncia de
chamadas.

**Exemplo de Stateful Session Bean:**

```java
import javax.ejb.Stateful;

@Stateful
public class CarrinhoDeComprasBean {

    private List<String> itens = new ArrayList<>();

    public void adicionarItem(String item) {
        itens.add(item);
    }

    public List<String> getItens() {
        return itens;
    }
}
```

Neste exemplo, o estado do carrinho de compras √© mantido entre as requisi√ß√µes. O cliente pode adicionar itens e,
posteriormente, recuperar o carrinho completo.

**Quando usar Stateful Session Beans?**

- Quando voc√™ precisa manter o estado do cliente entre v√°rias chamadas, como em uma sess√£o de login ou um processo de
  compra.
- Em fluxos de trabalho complexos, onde v√°rias etapas dependem de dados mantidos durante a sess√£o.

#### 1.3 **Singleton Session Beans**

Os **Singleton Session Beans** s√£o uma novidade a partir do EJB 3.1. Eles garantem que apenas uma inst√¢ncia do bean
exista durante o ciclo de vida da aplica√ß√£o. Esses beans s√£o ideais para tarefas globais, como gerenciamento de cache,
configura√ß√£o de aplica√ß√µes, ou controle de acesso a recursos compartilhados.

**Exemplo de Singleton Session Bean:**

```java
import javax.ejb.Singleton;

@Singleton
public class ConfiguracaoSistemaBean {

    private String configuracao;

    public String getConfiguracao() {
        return configuracao;
    }

    public void setConfiguracao(String configuracao) {
        this.configuracao = configuracao;
    }
}
```

Aqui, apenas uma inst√¢ncia de `ConfiguracaoSistemaBean` estar√° dispon√≠vel durante toda a vida da aplica√ß√£o, garantindo
que todos os usu√°rios acessem a mesma configura√ß√£o.

**Quando usar Singleton Session Beans?**

- Para dados ou recursos que precisam ser compartilhados globalmente entre todos os clientes.
- Para controlar acesso a recursos √∫nicos, como uma conex√£o de banco de dados ou um servi√ßo de cache.

---

### 2. **Message-Driven Beans (MDBs)**: Os Mestres das Mensagens

Se os **Session Beans** lidam com l√≥gica de neg√≥cios de forma s√≠ncrona (ou seja, cliente chama, bean responde), os *
*Message-Driven Beans (MDBs)** lidam com comunica√ß√£o **ass√≠ncrona**. Eles s√£o especialistas em ouvir e responder a
mensagens de sistemas de mensagens como o **Java Message Service (JMS)**.

Os **Message-Driven Beans** n√£o interagem diretamente com os clientes como os Session Beans. Em vez disso, eles ficam "
ouvindo" por novas mensagens em uma fila ou t√≥pico JMS e, quando uma mensagem chega, eles executam alguma l√≥gica.

**Exemplo de Message-Driven Bean:**

```java
import javax.ejb.MessageDriven;
import javax.jms.Message;
import javax.jms.MessageListener;

@MessageDriven
public class ProcessadorDePedidosBean implements MessageListener {

    public void onMessage(Message mensagem) {
        // Processar a mensagem recebida
        System.out.println("Mensagem recebida: " + mensagem);
    }
}
```

Neste exemplo, o bean implementa `MessageListener` e escuta mensagens em uma fila JMS, processando cada mensagem assim
que chega.

**Quando usar Message-Driven Beans?**

- Quando voc√™ precisa processar mensagens de forma ass√≠ncrona, como em sistemas de fila de pedidos.
- Para sistemas que precisam lidar com grandes volumes de mensagens, como sistemas de monitoramento ou notifica√ß√µes.

---

### 3. **Entity Beans**: Os Av√¥s do JPA

No passado, os **Entity Beans** eram a solu√ß√£o do EJB para persist√™ncia de dados, mapeando objetos Java para tabelas de
banco de dados. No entanto, com a introdu√ß√£o do **Java Persistence API (JPA)**, os Entity Beans foram substitu√≠dos e
ca√≠ram em desuso. Hoje, quando falamos de persist√™ncia em EJB, estamos realmente falando de **JPA**.

O JPA trouxe uma abordagem muito mais simples e intuitiva para trabalhar com persist√™ncia de dados, sem a complexidade
dos antigos Entity Beans.

**Exemplo com JPA (substituto dos Entity Beans):**

```java
import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class Cliente {

    @Id
    private Long id;
    private String nome;

    // Getters e Setters
}
```

Aqui, o mapeamento entre o objeto `Cliente` e uma tabela de banco de dados √© feito com a anota√ß√£o `@Entity`, usando a
API de persist√™ncia moderna do JPA.

**Quando usar JPA no lugar de Entity Beans?**

- Sempre que voc√™ precisar trabalhar com persist√™ncia de dados em uma aplica√ß√£o Java EE.
- Para mapeamento objeto-relacional (ORM) e gest√£o de entidades.

---

### Conclus√£o

Os **Session Beans**, **Message-Driven Beans** e os antigos **Entity Beans** (agora substitu√≠dos pelo JPA) desempenham
pap√©is fundamentais no desenvolvimento de aplica√ß√µes corporativas com EJB. Os **Session Beans** cuidam da l√≥gica de
neg√≥cios, os **Message-Driven Beans** processam mensagens de forma ass√≠ncrona, e o **JPA** √© agora a solu√ß√£o preferida
para persist√™ncia de dados.

Entender esses diferentes tipos de EJBs e como us√°-los de forma eficaz √© essencial para desenvolver sistemas robustos,
escal√°veis e de alta performance no mundo corporativo. Agora que voc√™ conhece os fundamentos, est√° pronto para explorar
ainda mais as possibilidades dessa tecnologia poderosa! üòÑ