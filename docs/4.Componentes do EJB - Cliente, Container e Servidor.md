### Componentes do EJB: Cliente, Container e Servidor

Quando falamos de **Enterprise JavaBeans (EJB)**, estamos tratando de um ambiente robusto e sofisticado, que lida com
aplica√ß√µes corporativas grandes e complexas. Para fazer tudo isso funcionar como uma engrenagem bem lubrificada, o EJB
se baseia em tr√™s pilares principais: **Cliente**, **Container** e **Servidor**. Estes tr√™s componentes s√£o os
respons√°veis por orquestrar todo o funcionamento do EJB, garantindo que o c√≥digo que voc√™ escreve possa ser executado de
forma escal√°vel, segura e eficiente.

Neste artigo, vamos explorar em detalhes cada um desses componentes, entender suas fun√ß√µes, e descobrir como eles
interagem para fazer a m√°gica do EJB acontecer.

### 1. Cliente EJB: O Solicitante

Vamos come√ßar com o **Cliente EJB**, que, na pr√°tica, √© o "pedinte" de servi√ßos. Quando falamos de um cliente no
contexto EJB, estamos falando de qualquer aplica√ß√£o ou m√≥dulo que precisa de algo que o EJB oferece, seja uma l√≥gica de
neg√≥cios, acesso a banco de dados ou processamento de mensagens.

O Cliente pode ser de v√°rios tipos:

- **Aplica√ß√µes Web** (como um site que usa um servidor Java EE)
- **Aplica√ß√µes Desktop** (um cliente Swing ou JavaFX, por exemplo)
- **Outro EJB** (sim, EJBs tamb√©m podem consumir outros EJBs)
- **Aplica√ß√µes m√≥veis ou sistemas externos** (atrav√©s de APIs expostas pelos EJBs)

### Como o Cliente acessa o EJB?

Para acessar um EJB, o cliente n√£o precisa saber onde e como o bean foi implementado (gra√ßas √† abstra√ß√£o). Ele s√≥ se
preocupa em pedir o servi√ßo e pronto! No **EJB 3.x**, essa comunica√ß√£o √© facilitada pelas **inje√ß√µes de depend√™ncia**.

**Exemplo b√°sico de um cliente EJB usando inje√ß√£o de depend√™ncia:**

```java
import javax.ejb.EJB;

public class HelloWorldClient {

    @EJB
    private HelloWorldBean helloBean;

    public void execute() {
        String mensagem = helloBean.sayHello("Leonardo");
        System.out.println(mensagem);
    }
}
```

Aqui, o cliente est√° simplesmente pedindo para o cont√™iner EJB injetar o bean `HelloWorldBean` e chamando o m√©todo
`sayHello`.

Antes do EJB 3.x, esse processo era mais complicado, exigindo o uso de **JNDI lookup**. Com o EJB 3.x, essa complexidade
desapareceu e a vida do desenvolvedor ficou bem mais f√°cil (aleluia!).

### 2. EJB Container: O Grande Gerente

Agora, vamos falar do **Container EJB**. Imagine o container como aquele gerente incr√≠vel que cuida de tudo para voc√™.
Ele sabe quando o cliente vai chegar, quando o pedido precisa ser preparado, e cuida para que tudo aconte√ßa conforme as
regras da casa. No contexto do EJB, o container √© o "orquestrador" que gerencia a execu√ß√£o dos beans e fornece servi√ßos
essenciais como:

- **Gerenciamento de Ciclo de Vida**: O container decide quando criar, destruir ou reutilizar um bean, sem que voc√™
  precise se preocupar com isso. Isso garante efici√™ncia e otimiza√ß√£o de recursos.

- **Inje√ß√£o de Depend√™ncias**: O container injeta automaticamente recursos (como outros EJBs, datasources, etc.) que o
  seu bean precisa para funcionar. Voc√™ s√≥ precisa usar a anota√ß√£o certa, como `@EJB` ou `@Resource`.

- **Gerenciamento de Transa√ß√µes**: O container gerencia transa√ß√µes de forma autom√°tica, garantindo que todas as
  opera√ß√µes sejam at√¥micas, ou seja, completadas com sucesso ou revertidas caso algo d√™ errado.

- **Seguran√ßa**: O container EJB tamb√©m gerencia a seguran√ßa, garantindo que apenas usu√°rios autorizados acessem
  determinadas funcionalidades dos beans. Tudo isso pode ser configurado de maneira declarativa, atrav√©s de anota√ß√µes, o
  que facilita muito a implementa√ß√£o.

### Ciclo de Vida de um Bean

Uma das principais responsabilidades do container √© gerenciar o **ciclo de vida** de um EJB. Veja como isso funciona no
caso de um **Stateless Session Bean**:

1. **Cria√ß√£o**: O container cria inst√¢ncias dos beans e as mant√©m em um pool, prontas para serem usadas quando o cliente
   fizer uma solicita√ß√£o.
2. **Inje√ß√£o de Depend√™ncias**: O container injeta qualquer recurso necess√°rio, como outros beans ou conex√µes de banco
   de dados.
3. **Invoca√ß√£o**: Quando o cliente faz uma chamada a um m√©todo do bean, o container pega uma inst√¢ncia do pool, executa
   o m√©todo e, em seguida, devolve o bean ao pool.
4. **Destrui√ß√£o**: Quando o container decide que n√£o precisa mais de uma inst√¢ncia do bean (por exemplo, em cen√°rios de
   baixa demanda), ele a destr√≥i para liberar recursos.

No caso de **Stateful Session Beans**, o ciclo de vida √© um pouco mais complexo, pois o container precisa manter o
estado do bean entre as chamadas. J√° para **Message-Driven Beans**, o container lida com mensagens ass√≠ncronas,
invocando o bean quando uma nova mensagem √© recebida.

### O Container Faz Mais do que Apenas Gerenciar Beans

Al√©m do gerenciamento de ciclo de vida, o **container EJB** oferece uma s√©rie de outros servi√ßos para os beans, como:

- **Escalabilidade**: O container pode distribuir os beans entre v√°rias inst√¢ncias para suportar cargas pesadas,
  melhorando a performance da aplica√ß√£o.
- **Pooling**: Para economizar recursos, o container mant√©m um pool de beans prontos para uso, evitando o custo de criar
  e destruir inst√¢ncias repetidamente.
- **Concorr√™ncia**: O container garante que o acesso concorrente aos beans seja seguro, evitando problemas como
  condi√ß√µes de corrida.

### 3. Servidor de Aplica√ß√£o: A Infraestrutura

O √∫ltimo pilar da nossa arquitetura EJB √© o **Servidor de Aplica√ß√£o**. Se o cliente √© o "pedinte" e o container √© o "
gerente", o servidor de aplica√ß√£o √© a **infraestrutura** que suporta tudo isso. Ele √© o ambiente onde o container EJB
vive e onde os beans realmente executam.

Os **servidores de aplica√ß√£o** fornecem um conjunto completo de funcionalidades para rodar aplica√ß√µes corporativas. Eles
incluem servi√ßos como:

- **Gerenciamento de Recursos**: O servidor lida com conex√µes de banco de dados, filas de mensagens, e outros recursos
  que o container EJB e os beans podem precisar.

- **Deploy de Aplica√ß√µes**: O servidor de aplica√ß√£o cuida do deploy e da configura√ß√£o das suas aplica√ß√µes EJB,
  facilitando a gest√£o e a manuten√ß√£o de ambientes corporativos.

- **Monitoramento e Gerenciamento**: Um servidor de aplica√ß√£o robusto geralmente oferece ferramentas de monitoramento
  que permitem acompanhar o desempenho da sua aplica√ß√£o em tempo real, identificar gargalos e at√© mesmo escalar os
  recursos automaticamente.

### Exemplos de Servidores de Aplica√ß√£o

Existem v√°rios servidores de aplica√ß√£o populares que suportam EJB:

- **GlassFish**: O GlassFish foi originalmente desenvolvido pela Sun Microsystems e √© a implementa√ß√£o de refer√™ncia da
  plataforma Java EE.

- **WildFly (antigo JBoss)**: Um servidor de aplica√ß√£o open-source amplamente utilizado, conhecido pela sua
  flexibilidade e escalabilidade.

- **WebLogic**: Um servidor de aplica√ß√£o comercial robusto, geralmente usado em grandes corpora√ß√µes que exigem alta
  confiabilidade e suporte t√©cnico de primeira.

- **IBM WebSphere**: Outra op√ß√£o popular em grandes empresas, oferecendo uma solu√ß√£o de n√≠vel corporativo com diversas
  funcionalidades avan√ßadas.

O servidor de aplica√ß√£o √© o **ecossistema** que hospeda o container EJB e os beans. Ele garante que todos os recursos e
servi√ßos necess√°rios estejam dispon√≠veis para que os beans possam funcionar corretamente.

### Conclus√£o

Os tr√™s componentes principais do EJB ‚Äî **Cliente, Container e Servidor de Aplica√ß√£o** ‚Äî trabalham juntos para formar a
espinha dorsal de uma aplica√ß√£o corporativa. Cada um deles tem seu papel claramente definido:

- **O Cliente** √© quem faz as solicita√ß√µes.
- **O Container** gerencia o ciclo de vida dos beans, cuida de transa√ß√µes, inje√ß√µes e seguran√ßa.
- **O Servidor de Aplica√ß√£o** fornece o ambiente onde tudo isso acontece, al√©m de gerenciar recursos e oferecer suporte
  para o deploy e o monitoramento da aplica√ß√£o.

Com essa arquitetura, o EJB permite o desenvolvimento de aplica√ß√µes empresariais de grande porte de forma escal√°vel e
segura, sem que o desenvolvedor tenha que se preocupar com detalhes de infraestrutura ou gerenciamento de recursos. Como
resultado, voc√™ pode focar no que realmente importa: entregar valor de neg√≥cio com seu c√≥digo.

Agora que voc√™ entende esses componentes, est√° pronto para mergulhar ainda mais fundo no mundo do EJB e tirar proveito
de todo o poder que ele oferece! üòÑ